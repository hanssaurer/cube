<!DOCTYPE html>
<html>
   <head>
     <!-- script type="text/javascript" src="d3js/d3.js" charset="utf-8"></script -->
     <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
   </head>
   <body>
     <p>Hello!</p>
     <div id = "MyCanvas" style="position: absolute; left: 200px; top: 200px; width:600px; height:500px; opacity: 0.9;"></div>   

<script type="text/javascript">

var rect1;
var xTurnAx = 100;
var deg = 0;
    
function insert()
{

var canvas = d3.select("#MyCanvas");
 
var svgSelection = canvas.append("svg")
      .attr("width", 500)
      .attr("height", 500)
      .style("fill", "gray");

//Axes    
var xAx = svgSelection.append("line")
     .attr("x1", 0)
     .attr("y1", 0)
     .attr("x2", 500)
     .attr("y2", 0) 
     .attr("stroke-width", 2)
     .attr("stroke", "black");    
    
var yAx = svgSelection.append("line")
     .attr("x1", 0)
     .attr("y1", 0)
     .attr("x2", 0)
     .attr("y2", 5000) 
     .attr("stroke-width", 2)
     .attr("stroke", "black");    
    
var xTrunAx = svgSelection.append("line")
     .attr("x1", xTurnAx)
     .attr("y1", 0)
     .attr("x2", xTurnAx)
     .attr("y2", 500) 
     .attr("stroke-width", 1)
     .attr("stroke", "gray");   
//stroke-dasharray="8,6" stroke-dashoffset="8"    
    
rect1 = svgSelection.append("rect")
    .attr("x", xTurnAx - 50)
    .attr("y", 10)
    .attr("width", 100)
    .attr("height", 100)   
    .style("fill", "red");
    
rect1.baseWidth = 100;    

rect2 = svgSelection.append("rect")
    .attr("x", xTurnAx - 50)
    .attr("y", 10)
    .attr("width", 0)
    .attr("height", 100)   
    .style("fill", "green");
    
rect2.baseWidth = 100;    

}    
    
function change()
{
    deg = deg + 5;
    if (Math.cos(deg * Math.PI/180) > 0) {
        rect1.attr("width", Math.round(rect1.baseWidth * Math.cos(deg * Math.PI/180)));  
        rect1.attr("x", xTurnAx - rect1.attr("width")/2);
    } else {
        rect2.attr("width", Math.round(rect2.baseWidth * -Math.cos(deg * Math.PI/180)));  
        rect2.attr("x", xTurnAx - rect2.attr("width")/2);
    }
}
    
insert();

    var myDiv = document.getElementById('MyCanvas');
    //myDiv.onclick="alert('You are clicking on me')";
    myDiv.addEventListener('click', change, false);
    
    
    //alert("huhu");

</script>
   </body>
</html>